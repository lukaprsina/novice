<script>
/* Odspodaj prilepi vsak BODY od prve ankete v oglati oklepaj spremenljivke json, zažen program, zapiš vrednosti,
    ter nato zbriši kar si naredu ter ponovi še za drugo anketo na drugem linku.
*/
var json = [
{
  "question2": "4",
  "question3": "5",
  "question4": "1",
  "question5": "5",
  "question6": "5",
  "question1": "5",
  "question18": "3",
  "question17": "4",
  "question16": "4",
  "question15": "5",
  "question14": "5",
  "question13": "5",
  "question12": "3",
  "question11": "5",
  "question10": "4"
},
{
  "question2": "5",
  "question3": "1",
  "question4": "4",
  "question5": "4",
  "question6": "2",
  "question1": "4",
  "question18": "2",
  "question17": "3",
  "question15": "2",
  "question14": "3",
  "question13": "4",
  "question12": "5",
  "question11": "2",
  "question10": "4"
},
{
  "question2": "4",
  "question3": "5",
  "question4": "2",
  "question5": "3",
  "question6": "4",
  "question18": "2",
  "question1": "5",
  "question17": "4",
  "question15": "4",
  "question16": "4",
  "question14": "4",
  "question13": "4",
  "question12": "2",
  "question11": "4",
  "question10": "4"
},
{
  "question2": "4",
  "question3": "3",
  "question4": "3",
  "question5": "4",
  "question6": "3",
  "question1": "4",
  "question18": "2",
  "question17": "4",
  "question16": "4",
  "question15": "4",
  "question14": "5",
  "question13": "2",
  "question12": "3",
  "question11": "4",
  "question10": "4"
},

{
  "question2": "2",
  "question3": "5",
  "question4": "2",
  "question5": "3",
  "question6": "4",
  "question1": "4",
  "question18": "3",
  "question17": "3",
  "question16": "4",
  "question15": "4",
  "question14": "3",
  "question13": "3",
  "question12": "3",
  "question11": "5",
  "question10": "4"
},
{
  "question2": "3",
  "question3": "3",
  "question4": "3",
  "question5": "3",
  "question6": "3",
  "question1": "3",
  "question18": "3",
  "question17": "3",
  "question16": "3",
  "question14": "3",
  "question15": "3",
  "question12": "3",
  "question13": "3",
  "question10": "3",
  "question11": "3"
},
{
  "question2": "4",
  "question3": "4",
  "question4": "3",
  "question5": "4",
  "question6": "3",
  "question1": "4",
  "question18": "4",
  "question17": "4",
  "question16": "3",
  "question15": "4",
  "question14": "4",
  "question13": "3",
  "question12": "4",
  "question11": "4",
  "question10": "4"
},
{
  "question2": "4",
  "question3": "5",
  "question4": "2",
  "question5": "4",
  "question6": "5",
  "question1": "3",
  "question18": "2",
  "question17": "5",
  "question16": "5",
  "question15": "5",
  "question14": "5",
  "question13": "4",
  "question12": "2",
  "question11": "5",
  "question10": "5"
},
{
  "question3": "3",
  "question2": "3",
  "question4": "3",
  "question5": "3",
  "question6": "3",
  "question1": "4",
  "question18": "3",
  "question17": "5",
  "question16": "5",
  "question15": "5",
  "question14": "4",
  "question13": "4",
  "question12": "2",
  "question11": "4",
  "question10": "4"
},
{
  "question2": "5",
  "question3": "5",
  "question4": "1",
  "question5": "5",
  "question6": "5",
  "question1": "5",
  "question18": "2",
  "question17": "5",
  "question16": "5",
  "question15": "5",
  "question14": "5",
  "question13": "4",
  "question12": "1",
  "question11": "5",
  "question10": "5"
},
{
  "question2": "4",
  "question3": "5",
  "question4": "1",
  "question5": "4",
  "question6": "4",
  "question1": "5",
  "question18": "2",
  "question17": "2",
  "question16": "4",
  "question15": "4",
  "question14": "4",
  "question13": "3",
  "question12": "2",
  "question11": "5",
  "question10": "5"
}
]

/* Koda od tukaj naprej (NE PIPAJ)*/
var average = [];
var averages = [];
var stdevs = []


function standardDeviation(values){
  var avg = aaverage(values);
  
  var squareDiffs = values.map(function(value){
    var diff = value - avg;
    var sqrDiff = diff * diff;
    return sqrDiff;
  });
  
  var avgSquareDiff = aaverage(squareDiffs);

  var stdDev = Math.sqrt(avgSquareDiff);
  return stdDev;
}

function aaverage(data){
  var sum = data.reduce(function(sum, value){
    return sum + value;
  }, 0);

  var avg = sum / data.length;
  return avg;
}

for (var i = 0; i < json.length; i++) {
  for (var j = 0; j < 18; j++) {

    var string = "question" + (j + 1);
    let grade = json[i][string];

    if (grade) {
      if (!average[string]) {average[string] = {}}
      res = average[string].res
      if (!res) {res = 0}
      res += Number(grade);
      average[string].res = res
      
      len = average[string].len
      if (!len) {len = 0}
      len += 1;
      average[string].len = len

      nums = average[string].nums
      if (!nums) {nums = []}
      nums.push(Number(grade));
      average[string].nums = nums
    }
  }
}

for (question in average) {
  averages.push (average[question].res / average[question].len)
  stdevs.push(standardDeviation(average[question].nums))
}

console.log(average)
console.log(averages)
console.log(stdevs)

</script>